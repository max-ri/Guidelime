local addonName, addon = ...

addon.DM = addon.DM or {}; local DM = addon.DM

--[[if GetLocale() == "enUS" then
	-- read ui map id list from HDB
	local HBD = LibStub("HereBeDragons-2.0")
	DM.mapIDs = {}
	for i, id in ipairs(HBD:GetAllMapIDs()) do
		DM.mapIDs[HBD:GetLocalizedMap(id)] = id
	end
else]]

if select(4, GetBuildInfo()) >= 40000 then
	DM.mapIDs = {
		["Dire Maul"] = 240,
		["The Hinterlands"] = 26,
		["Blackrock Mountain"] = 35,
		["Cosmic"] = 946,
		["A Brewing Storm"] = 447,
		["Westfall"] = 52,
		["Abyssal Depths"] = 204,
		["Orgrimmar"] = 86,
		["Ruins of Ogudei"] = 421,
		["Oona Kagu"] = 375,
		["Zul'Drak"] = 121,
		["Northern Stranglethorn"] = 50,
		["Karazhan"] = 366,
		["Pranksters' Hollow"] = 381,
		["The Vortex Pinnacle"] = 325,
		["Darnassus"] = 89,
		["Azuremyst Isle"] = 97,
		["Tol Barad"] = 2340,
		["Ruins of Ahn'Qiraj"] = 247,
		["Greenstone Quarry"] = 373,
		["Blackwing Lair"] = 290,
		["Un'Goro Crater"] = 78,
		["Ironforge"] = 87,
		["Western Plaguelands"] = 22,
		["Gallywix Labor Mine"] = 178,
		["The Jade Forest"] = 448,
		["The Widow's Wail"] = 374,
		["Jangolode Mine"] = 54,
		["Crypt of Forgotten Kings"] = 482,
		["Throne of Thunder"] = 515,
		["Plaguelands: The Scarlet Enclave"] = 124,
		["Howling Fjord"] = 117,
		["Naxxramas"] = 167,
		["Searing Gorge"] = 32,
		["Blade's Edge Mountains"] = 105,
		["Tiragarde Keep"] = 4,
		["The Veiled Stair"] = 433,
		["Wailing Caverns"] = 279,
		["Onyxia's Lair"] = 248,
		["Molten Core"] = 232,
		["Spitescale Cavern"] = 464,
		["Unga Ingoo"] = 450,
		["Skull Rock"] = 5,
		["Ashenvale"] = 63,
		["Azeroth"] = 947,
		["Kelp'thar Forest"] = 201,
		["Blackfathom Deeps"] = 223,
		["Serpentshrine Cavern"] = 1554,
		["Terrace of Endless Spring"] = 456,
		["Emberstone Mine"] = 180,
		["Guo-Lai Halls"] = 396,
		["Blackrock Depths"] = 243,
		["Nagrand"] = 107,
		["Deeprun Tram"] = 500,
		["Wintergrasp"] = 2104,
		["Shimmering Expanse"] = 205,
		["Ahn'Qiraj"] = 321,
		["Eversong Woods"] = 94,
		["The Underbog"] = 262,
		["Niuzao Temple"] = 389,
		["Zul'Gurub"] = 337,
		["Celestial Tournament"] = 571,
		["Tanaris"] = 71,
		["Palemane Rock"] = 8,
		["Borean Tundra"] = 114,
		["Utgarde Pinnacle"] = 137,
		["Amani Catacombs"] = 96,
		["Heart of Fear"] = 475,
		["Camp Narache"] = 462,
		["The Culling of Stratholme"] = 131,
		["The Stockade"] = 225,
		["Halls of Reflection"] = 185,
		["Lost City of the Tol'vir"] = 277,
		["The Battle for Gilneas"] = 275,
		["Shadowmoon Valley"] = 104,
		["Throne of the Tides"] = 323,
		["Halls of Origination"] = 299,
		["Deadwind Pass"] = 42,
		["Shadowthread Cave"] = 58,
		["Baradin Hold"] = 282,
		["Shadowfang Keep"] = 316,
		["Molten Front"] = 338,
		["The Deeper"] = 384,
		["Timeless Isle"] = 554,
		["Thunder King's Citadel"] = 518,
		["Thunder Bluff"] = 88,
		["The Slithering Scar"] = 79,
		["Siege of Niuzao Temple"] = 459,
		["Outland"] = 1467,
		["The Forge of Souls"] = 183,
		["The Ruby Sanctum"] = 200,
		["The Mechanar"] = 268,
		["Badlands"] = 15,
		["The Black Morass"] = 273,
		["Ruins of Gilneas"] = 217,
		["Tirisfal Glades"] = 18,
		["Fel Rock"] = 59,
		["Azshara"] = 76,
		["The Botanica"] = 266,
		["Sholazar Basin"] = 119,
		["New Tinkertown"] = 469,
		["Pandaria"] = 2473,
		["Firelands"] = 369,
		["Icecrown"] = 118,
		["Ruins of Korune"] = 387,
		["Netherstorm"] = 109,
		["The Steamvault"] = 264,
		["Ahn'Qiraj: The Fallen Kingdom"] = 327,
		["Burning Blade Coven"] = 2,
		["Uldaman"] = 231,
		["Zangarmarsh"] = 102,
		["Kezan"] = 194,
		["Shado-Pan Monastery"] = 446,
		["Crystalsong Forest"] = 127,
		["Night Web's Hollow"] = 466,
		["Feralas"] = 69,
		["Dagger in the Dark"] = 489,
		["The Ancient Passage"] = 434,
		["The Oculus"] = 146,
		["Dun Morogh"] = 523,
		["Tempest Keep"] = 1555,
		["Eye of the Storm"] = 397,
		["Northrend"] = 988,
		["The Cape of Stranglethorn"] = 210,
		["Blackrock Spire"] = 255,
		["Hellfire Peninsula"] = 100,
		["Hrothgar's Landing"] = 170,
		["Black Temple"] = 497,
		["The Wandering Isle"] = 378,
		["Eastern Kingdoms"] = 1463,
		["Undercity"] = 998,
		["Zul'Aman"] = 333,
		["The Blood Furnace"] = 261,
		["Proving Grounds"] = 480,
		["Kalimdor"] = 1464,
		["The Gaping Chasm"] = 73,
		["Ahn'kahet: The Old Kingdom"] = 132,
		["The Barrens"] = 10,
		["A Little Patience"] = 487,
		["Shrine of Two Moons"] = 392,
		["Dragon Soul"] = 415,
		["Sethekk Halls"] = 259,
		["Dalaran"] = 502,
		["The Violet Hold"] = 168,
		["Burning Steppes"] = 36,
		["Wetlands"] = 56,
		["Scarlet Monastery Entrance"] = 19,
		["Gol'Bolar Quarry"] = 31,
		["Halls of Stone"] = 1375,
		["Mogu'shan Vaults"] = 473,
		["Volcanoth's Lair"] = 176,
		["Twin Peaks"] = 206,
		["Brawl'gar Arena"] = 503,
		["Arathi Basin"] = 93,
		["Dustwind Cave"] = 6,
		["Loch Modan"] = 48,
		["Gold Coast Quarry"] = 53,
		["Hyjal Summit"] = 329,
		["Hellfire Ramparts"] = 347,
		["The Venture Co. Mine"] = 9,
		["The Storm Peaks"] = 120,
		["Silithus"] = 81,
		["Jasperlode Mine"] = 40,
		["Tides' Hollow"] = 98,
		["Grizzly Hills"] = 116,
		["Brewmoon Festival"] = 452,
		["Gate of the Setting Sun"] = 438,
		["Magisters' Terrace"] = 349,
		["Pit of Saron"] = 184,
		["Greymane Manor"] = 182,
		["Isle of Giants"] = 507,
		["Vale of Eternal Blossoms"] = 521,
		["Siege of Orgrimmar"] = 570,
		["Cavern of Lost Spirits"] = 555,
		["Grim Batol"] = 293,
		["ScholomanceOLD"] = 309,
		["The Bastion of Twilight"] = 296,
		["Gilneas City"] = 202,
		["Vault of Archavon"] = 156,
		["Fargodeep Mine"] = 39,
		["Townlong Steppes"] = 388,
		["The Swollen Vault"] = 506,
		["Lightning Vein Mine"] = 517,
		["Isle of Thunder"] = 516,
		["Scholomance"] = 479,
		["Frostmane Hold"] = 470,
		["Ammen Vale"] = 468,
		["Isle of Conquest"] = 169,
		["Terokkar Forest"] = 108,
		["Razorfen Kraul"] = 301,
		["Echo Isles"] = 463,
		["The Noxious Lair"] = 72,
		["Shadowglen"] = 460,
		["Silvermoon City"] = 110,
		["Mogu'shan Palace"] = 455,
		["The Secrets of Ragefire"] = 522,
		["Stormstout Brewery"] = 442,
		["Well of Eternity"] = 398,
		["Temple of the Jade Serpent"] = 430,
		["Maraudon"] = 281,
		["Valley of Trials"] = 461,
		["Trial of the Crusader"] = 173,
		["Coldridge Valley"] = 427,
		["Stormwind City"] = 84,
		["Echo Ridge Mine"] = 426,
		["Mana-Tombs"] = 272,
		["Dragonblight"] = 115,
		["The Temple of Atal'Hakkar"] = 220,
		["Warsong Gulch"] = 92,
		["Bloodmyst Isle"] = 106,
		["Swamp of Sorrows"] = 51,
		["Deepholm"] = 207,
		["Silvershard Mines"] = 423,
		["Arathi Highlands"] = 14,
		["Dread Wastes"] = 422,
		["Stranglethorn Vale"] = 224,
		["Eastern Plaguelands"] = 23,
		["Sunstrider Isle"] = 467,
		["The Eye of Eternity"] = 141,
		["Blackrock Caverns"] = 284,
		["Desolace"] = 66,
		["Blasted Lands"] = 17,
		["Halls of Lightning"] = 139,
		["Isle of Quel'Danas"] = 122,
		["Mulgore"] = 7,
		["Temple of Kotmogu"] = 449,
		["Felwood"] = 77,
		["Ban'ethil Barrow Den"] = 61,
		["Darkmoon Island"] = 407,
		["End Time"] = 406,
		["Hour of Twilight"] = 400,
		["Gilneas"] = 179,
		["The Exodar"] = 103,
		["The Shattered Halls"] = 246,
		["Scarlet Halls"] = 432,
		["Mount Hyjal"] = 198,
		["Silverpine Forest"] = 21,
		["Gundrak"] = 154,
		["Shrine of Seven Stars"] = 394,
		["Zul'Farrak"] = 219,
		["Alterac Valley"] = 91,
		["Deathknell"] = 465,
		["The Grizzled Den"] = 29,
		["Stonetalon Mountains"] = 65,
		["Shadow Labyrinth"] = 260,
		["Caverns of Time"] = 75,
		["Kaja'mine"] = 197,
		["Ulduar"] = 152,
		["Auchenai Crypts"] = 257,
		["Thousand Needles"] = 64,
		["Deepwind Gorge"] = 519,
		["Tomb of Conquerors"] = 385,
		["Utgarde Keep"] = 135,
		["Howlingwind Cavern"] = 380,
		["Scarlet Monastery"] = 436,
		["Kun-Lai Summit"] = 379,
		["Cavern of Endless Echoes"] = 377,
		["Valley of the Four Winds"] = 376,
		["The Nexus"] = 370,
		["Winterspring"] = 83,
		["Dustwallow Marsh"] = 483,
		["Darkshore"] = 62,
		["Durotar"] = 1,
		["Sunwell Plateau"] = 336,
		["Razorfen Downs"] = 300,
		["Magtheridon's Lair"] = 331,
		["Gruul's Lair"] = 330,
		["Throne of the Four Winds"] = 328,
		["Stillpine Hold"] = 99,
		["The Stonecore"] = 324,
		["Coldridge Pass"] = 28,
		["Shattrath City"] = 111,
		["Stratholme"] = 318,
		["Drak'Tharon Keep"] = 161,
		["Battle on the High Seas"] = 524,
		["Frostmane Hovel"] = 428,
		["Blackwing Descent"] = 286,
		["Old Hillsbrad Foothills"] = 274,
		["Strand of the Ancients"] = 128,
		["Twilight Highlands"] = 241,
		["The Maelstrom"] = 948,
		["Duskwood"] = 47,
		["Kaja'mite Cavern"] = 175,
		["Teldrassil"] = 57,
		["Knucklethump Hole"] = 382,
		["Ghostlands"] = 95,
		["Uldum"] = 249,
		["Tol Barad Peninsula"] = 245,
		["Southern Barrens"] = 199,
		["Ragefire Chasm"] = 213,
		["The Deadmines"] = 292,
		["Elwynn Forest"] = 37,
		["Gnomeregan"] = 229,
		["Ruins of Gilneas City"] = 218,
		["The Obsidian Sanctum"] = 155,
		["Vashj'ir"] = 203,
		["Azjol-Nerub"] = 159,
		["Moonglade"] = 80,
		["Northshire"] = 425,
		["Twilight's Run"] = 82,
		["The Slave Pens"] = 265,
		["Icecrown Citadel"] = 193,
		["The Lost Isles"] = 174,
		["Trial of the Champion"] = 171,
		["Assault on Zan'vess"] = 451,
		["Redridge Mountains"] = 49,
		["Krasarang Wilds"] = 498,
		["Hillsbrad Foothills"] = 25,
		["The Arcatraz"] = 271
	}
else
	DM.mapIDs = {
		["The Hinterlands"] = 1425,
		["Moonglade"] = 1450,
		["Thousand Needles"] = 1441,
		["Winterspring"] = 1452,
		["Arathi Highlands"] = 1417,
		["Westfall"] = 1436,
		["Badlands"] = 1418,
		["Searing Gorge"] = 1427,
		["Loch Modan"] = 1432,
		--["Eastern Kingdoms"] = 1415,
		["Undercity"] = 1458,
		["Desolace"] = 1443,
		["Warsong Gulch"] = 1460,
		["Tirisfal Glades"] = 1420,
		["Stormwind City"] = 1453,
		["Azshara"] = 1447,
		["The Barrens"] = 1413,
		["Swamp of Sorrows"] = 1435,
		--["Azeroth"] = 947,
		["Alterac Mountains"] = 1416,
		["Darkshore"] = 1439,
		["Blasted Lands"] = 1419,
		["Stranglethorn Vale"] = 1434,
		["Eastern Plaguelands"] = 1423,
		["Duskwood"] = 1431,
		["Durotar"] = 1411,
		["Orgrimmar"] = 1454,
		["Ashenvale"] = 1440,
		["Teldrassil"] = 1438,
		["Redridge Mountains"] = 1433,
		["Un'Goro Crater"] = 1449,
		["Mulgore"] = 1412,
		["Ironforge"] = 1455,
		["Felwood"] = 1448,
		["Tanaris"] = 1446,
		["Stonetalon Mountains"] = 1442,
		["Burning Steppes"] = 1428,
		["Deadwind Pass"] = 1430,
		["Dun Morogh"] = 1426,
		["Western Plaguelands"] = 1422,
		["Wetlands"] = 1437,
		--["Kalimdor"] = 1414,
		["Arathi Basin"] = 1461,
		["Silverpine Forest"] = 1421,
		["Darnassus"] = 1457,
		["Feralas"] = 1444,
		["Elwynn Forest"] = 1429,
		["Alterac Valley"] = 1459,
		["Thunder Bluff"] = 1456,
		["Dustwallow Marsh"] = 1445,
		["Hillsbrad Foothills"] = 1424,
		["Silithus"] = 1451,
		
		-- The Burning Crusade
		["Eversong Woods"] = 1941,
		["Ghostlands"] = 1942,
		["Azuremyst Isle"] = 1943,
		["Hellfire Peninsula"] = 1944,
		["Zangarmarsh"] = 1946,
		["The Exodar"] = 1947,
		["Shadowmoon Valley"] = 1948,
		["Blades Edge Mountains"] = 1949,
		["Bloodmyst Isle"] = 1950,
		["Nagrand"] = 1951,
		["Terokkar Forest"] = 1952,
		["Netherstorm"] = 1953,
		["Silvermoon City"] = 1954,
		["Shattrath City"] = 1955,
		["Isle of Quel Danas"] = 1957,
		
		-- The Wrath of the Lich King
	    ["Borean Tundra"]=114,
	    ["Dragonblight"]=115,
	    ["Grizzly Hills"]=116,
	    ["Howling Fjord"]=117,
	    ["Icecrown"]=118,
	    ["Sholazar Basin"]=119,
	    ["The Storm Peaks"]=120,
	    ["Zul'Drak"]=121,
	    ["Wintergrasp"]=123,
	    ["Dalaran"]=125,
	    ["The Underbelly"]=126,	
		["The Scarlet Enclave"]=124,	
		["Crystalsong Forest"]=127,
		["Hrothgar's Landing"]=170,
	}
end

DM.zoneNames = {}
for zone, id in pairs(DM.mapIDs) do
	DM.zoneNames[id] = zone
end

function DM.getZoneName(name)
	name = name:lower():gsub("[%s']", "")
	if name:sub(1, 3) == "the" then name = name:sub(4) end
	for zone, _ in pairs(DM.mapIDs) do
		local z = zone:lower():gsub("[%s']", "")
		if z:sub(1, 3) == "the" then z = z:sub(4) end
		if z == name then return zone end
	end
end
